<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Co na to BŘEZÁKY</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #0a1a3c;
    color: white;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
}
.container {
    width: 90%;
    max-width: 1000px;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 20px;
}
.header-box {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100px;
    background: #09132b;
    font-size: 28px;
    font-weight: bold;
    border-radius: 10px;
    margin-bottom: 20px;
}
#question {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100px;
    background: #123;
    font-size: 24px;
    font-weight: bold;
    border-radius: 10px;
    margin-bottom: 10px;
}
#answers {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    width: 100%;
    margin-bottom: 20px;
}
.answer {
    display: flex;
    justify-content: center;
    align-items: center;
    background: #123;
    text-align: center;
    font-size: 22px;
    font-weight: bold;
    border-radius: 10px;
    cursor: pointer;
    min-height: 80px;
}
.answer.revealed { background: #1c3d7a; justify-content: space-between; padding: 5px; }
.answer .text { flex-grow: 1; text-align: center; font-size: 20px; font-weight:bold; }
.answer .buttons { display: flex; gap: 10px; }
.header-top {
    display: flex;
    justify-content: space-between;
    width: 100%;
    margin-bottom: 20px;
}
#btnNext {
    padding: 10px 20px;
    font-size: 18px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}
.teams, .scores {
    display: flex;
    justify-content: center;
    gap: 50px;
    font-size: 24px;
    margin-bottom: 10px;
}
#tabs {
    position: fixed;
    bottom: 0;
    width: 100%;
    background: #09132b;
    display: flex;
    justify-content: center;
    gap: 20px;
    padding: 10px 0;
    z-index: 10;
}
textarea, input[type=text]{width:90%; margin:5px 0; padding:5px;}
textarea{height:150px;}
.adminPoints { display: flex; justify-content: center; gap: 20px; margin: 10px 0; }
.adminPoints input { width: 60px; font-size: 16px; text-align: center; }
</style>
</head>
<body>

<div class="container" id="pageGame">
    <div class="header-box">Co na to BŘEZÁKY</div>
    <div class="header-top">
        <button id="btnNext">Další otázka</button>
    </div>

    <div class="teams">
        <div id="headA">Tým A</div>
        <div id="headB">Tým B</div>
    </div>
    <div class="scores">
        <div id="scoreHeadA">0 bodů</div>
        <div id="scoreHeadB">0 bodů</div>
    </div>

    <div id="question">Zde bude otázka…</div>
    <div id="answers">
        <!-- odpovědi se načtou sem -->
    </div>
</div>

<div id="tabs">
    <button onclick="showGame()">Hra</button>
    <button onclick="showAdmin()">Administrace</button>
</div>

<div id="pageAdmin" style="display:none;padding:20px;">
    <h2>Administrace</h2>
    <h3>Názvy týmů</h3>
    Tým A: <input id="nameA_admin" value="Tým A" /><br><br>
    Tým B: <input id="nameB_admin" value="Tým B" /><br><br>

    <h3>Úprava skóre týmů</h3>
    <div class="adminPoints">
        A: <input id="scoreInputA" type="number" value="0" /> <button id="scoreBtnA">Potvrdit</button>
        B: <input id="scoreInputB" type="number" value="0" /> <button id="scoreBtnB">Potvrdit</button>
    </div>

    <h3>Vložit otázky a odpovědi</h3>
    <textarea id="bulkInput" placeholder="Otázka 1&#10;odpověď 1&#09;body&#10;odpověď 2&#09;body&#10;&#10;Otázka 2..."></textarea><br>
    <button id="btnLoadBulk">Přidat otázky</button>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    let questions = [];
    let currentIndex = 0;
    let scoreA = 0, scoreB = 0;

    function updateScores(){
        document.getElementById('scoreHeadA').textContent = scoreA+' bodů';
        document.getElementById('scoreHeadB').textContent = scoreB+' bodů';
        document.getElementById('scoreInputA').value = scoreA;
        document.getElementById('scoreInputB').value = scoreB;
    }

    document.getElementById('scoreBtnA').addEventListener('click', ()=>{ scoreA = parseInt(document.getElementById('scoreInputA').value)||0; updateScores(); });
    document.getElementById('scoreBtnB').addEventListener('click', ()=>{ scoreB = parseInt(document.getElementById('scoreInputB').value)||0; updateScores(); });

    function renameTeams(){
        document.getElementById('headA').textContent = document.getElementById('nameA_admin').value || 'Tým A';
        document.getElementById('headB').textContent = document.getElementById('nameB_admin').value || 'Tým B';
    }
    document.getElementById('nameA_admin').addEventListener('change', renameTeams);
    document.getElementById('nameB_admin').addEventListener('change', renameTeams);

    function loadQuestion(index){
        if(questions.length===0 || index>=questions.length) return;
        const q = questions[index];
        document.getElementById('question').textContent = q.q;
        const answersDiv = document.getElementById('answers');
        answersDiv.innerHTML = '';
        const rows = Math.ceil(q.a.length/2);
        answersDiv.style.gridTemplateRows = `repeat(${rows}, 1fr)`;
        q.a.forEach((ans,i)=>{
            const div = document.createElement('div');
            div.className='answer';
            div.innerHTML=`<div class="text">${i+1}</div><div class="buttons"></div>`;
            const buttonsDiv = div.querySelector('.buttons');
            div.addEventListener('click', ()=>{
                if(div.classList.contains('revealed')) return;
                div.classList.add('revealed');
                div.querySelector('.text').textContent = ans.text;
                buttonsDiv.innerHTML = '';
                const btnA = document.createElement('button');
                btnA.textContent = `+${ans.points} A`;
                btnA.addEventListener('click', ()=>{ scoreA+=ans.points; updateScores(); });
                const btnB = document.createElement('button');
                btnB.textContent = `+${ans.points} B`;
                btnB.addEventListener('click', ()=>{ scoreB+=ans.points; updateScores(); });
                buttonsDiv.appendChild(btnA);
                buttonsDiv.appendChild(btnB);
            });
            answersDiv.appendChild(div);
        });
    }

    document.getElementById('btnNext').addEventListener('click', ()=>{
        if(currentIndex<questions.length){
            loadQuestion(currentIndex);
            currentIndex++;
        } else { alert('Žádné další otázky.'); }
    });

    document.getElementById('btnLoadBulk').addEventListener('click', ()=>{
        const text = document.getElementById('bulkInput').value.trim();
        if(!text){ alert('Text je prázdný!'); return; }
        const lines = text.split(/\r?\n/);
        let i=0;
        while(i<lines.length){
            if(!lines[i].trim()){ i++; continue; }
            const qText = lines[i].trim(); i++;
            const aArr = [];
            while(i<lines.length && lines[i].trim()){
                const parts = lines[i].split(/\t+/);
                if(parts.length<1){ i++; continue; }
                const points = parseInt(parts[1]) || 1;
                aArr.push({text: parts[0], points: points});
                i++;
            }
            if(aArr.length>0) questions.push({q:qText, a:aArr});
        }
        document.getElementById('bulkInput').value = '';
        if(currentIndex===0) loadQuestion(currentIndex++);
    });

    window.showGame = function(){document.getElementById('pageGame').style.display='flex'; document.getElementById('pageAdmin').style.display='none';};
    window.showAdmin = function(){document.getElementById('pageGame').style.display='none'; document.getElementById('pageAdmin').style.display='block';};

    updateScores();
});
</script>

</body>
</html>
